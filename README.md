# Nona - è®ºæ–‡å›¾ç‰‡Promptæµ‹è¯•å·¥å…·

è‡ªåŠ¨åŒ–æ‰¹é‡ä¸‹è½½è®ºæ–‡ã€æå–æµç¨‹å›¾ã€ç”ŸæˆPromptå¹¶é‡æ–°ç”Ÿæˆå›¾ç‰‡ï¼Œç”¨äºæµ‹è¯•å’Œä¼˜åŒ–å›¾ç‰‡ç”Ÿæˆæ¨¡å‹çš„é¢„åˆ¶Promptã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ“š **å¤šé¢†åŸŸè®ºæ–‡æ”¶é›†**ï¼šä»12ä¸ªä¸åŒarXivåˆ†ç±»è‡ªåŠ¨æ”¶é›†è®ºæ–‡ï¼ˆè®¡ç®—æœºè§†è§‰ã€NLPã€æœºå™¨å­¦ä¹ ã€AIç­‰ï¼‰
- ğŸ” **æ™ºèƒ½å›¾ç‰‡æå–**ï¼šåŸºäºå…³é”®è¯æœç´¢ï¼Œè‡ªåŠ¨æå–è®ºæ–‡ä¸­çš„æµç¨‹å›¾/æ¶æ„å›¾/æ¼”ç¤ºå›¾
- ğŸ¤– **AI Promptç”Ÿæˆ**ï¼šä½¿ç”¨OpenRouter APIï¼ˆgoogle/gemini-2.5-flashï¼‰åˆ†æå›¾ç‰‡ï¼Œç”Ÿæˆ5ä¸ªä¸åŒçš„è¯¦ç»†Prompt
- ğŸ¨ **å›¾ç‰‡é‡æ–°ç”Ÿæˆ**ï¼šä½¿ç”¨OpenRouter APIï¼ˆgoogle/gemini-3-pro-image-previewï¼‰æ ¹æ®æ¯ä¸ªPromptç”Ÿæˆæ–°å›¾ç‰‡
- ğŸ“Š **ç»“æ„åŒ–è¾“å‡º**ï¼šæ¯å¼ åŸå›¾åŠå…¶å¯¹åº”çš„5ä¸ªPromptå’Œ5å¼ ç”Ÿæˆå›¾ç‰‡æ•´ç†åœ¨ä¸€èµ·ï¼Œæ–¹ä¾¿å¯¹æ¯”

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
git clone https://github.com/qiyunle112358/nona-prompt-test.git
cd nona-prompt-test
pip install -r requirements.txt
```

### 2. é…ç½®APIå¯†é’¥

å¤åˆ¶é…ç½®æ–‡ä»¶å¹¶å¡«å…¥ä½ çš„OpenRouter API Keyï¼š

```bash
cp env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```bash
# ä½¿ç”¨OpenRouter API
LLM_API_KEY=sk-or-v1-your-key-here
LLM_BASE_URL=https://openrouter.ai/api/v1
LLM_MODEL=deepseek/deepseek-chat
```

è·å–API Keyï¼šhttps://openrouter.ai/keys

### 3. è¿è¡Œæµ‹è¯•

```bash
# æµ‹è¯•2å¼ å›¾ï¼ˆæ¨èå…ˆç”¨å°æ•°é‡æµ‹è¯•ï¼‰
python scripts/image_prompt_test.py \
    --num-images 2 \
    --year 2024 \
    --num-prompts 5 \
    --openrouter-api-key YOUR_API_KEY \
    --output-dir data/prompt_test

# å®Œæ•´è¿è¡Œï¼ˆä½¿ç”¨æ··åˆå¹¶è¡Œï¼Œæ•ˆç‡æå‡3å€ï¼‰
python scripts/image_prompt_test.py \
    --num-images 76 \
    --year 2024 \
    --num-prompts 5 \
    --openrouter-api-key YOUR_API_KEY \
    --output-dir data/prompt_test \
    --max-papers 2000 \
    --parallel-papers 3 \
    --parallel-images 3 \
    --parallel-eval 5

# æ–­ç‚¹ç»­ä¼ ï¼ˆå¦‚æœä¸­æ–­åç»§ç»­ï¼‰
python scripts/image_prompt_test.py \
    --num-images 76 \
    --year 2024 \
    --num-prompts 5 \
    --openrouter-api-key YOUR_API_KEY \
    --output-dir data/prompt_test \
    --max-papers 2000 \
    --parallel-papers 3 \
    --parallel-images 3 \
    --parallel-eval 5 \
    --resume
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨è¯´æ˜

### å‚æ•°è¯´æ˜

- `--num-images`: è¦æ”¶é›†çš„æµç¨‹å›¾æ•°é‡ï¼ˆé»˜è®¤100ï¼‰
- `--year`: è®ºæ–‡å¹´ä»½ï¼ˆé»˜è®¤2024ï¼‰
- `--num-prompts`: æ¯ä¸ªåŸå›¾ç”Ÿæˆçš„promptæ•°é‡ï¼ˆé»˜è®¤5ï¼‰
- `--openrouter-api-key`: **å¿…éœ€**ï¼ŒOpenRouter APIå¯†é’¥
- `--output-dir`: è¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ `data/prompt_test`ï¼‰
- `--max-papers`: æœ€å¤šå¤„ç†çš„è®ºæ–‡æ•°é‡ï¼ˆé»˜è®¤500ï¼Œç”¨äºç¡®ä¿èƒ½æ‰¾åˆ°è¶³å¤Ÿçš„æµç¨‹å›¾ï¼‰
- `--parallel-papers`: è®ºæ–‡çº§åˆ«å¹¶è¡Œæ•°ï¼ˆé»˜è®¤3ï¼Œæ··åˆå¹¶è¡Œæ¨¡å¼ï¼‰
- `--parallel-images`: å›¾ç‰‡ç”Ÿæˆå¹¶è¡Œæ•°ï¼ˆé»˜è®¤3ï¼Œé¿å…APIé™æµï¼‰
- `--parallel-eval`: ç›¸ä¼¼åº¦è¯„ä¼°å¹¶è¡Œæ•°ï¼ˆé»˜è®¤5ï¼‰
- `--resume`: ä»ä¸Šæ¬¡ä¸­æ–­å¤„ç»§ç»­ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰

### å·¥ä½œæµç¨‹ï¼ˆæ··åˆå¹¶è¡Œæ¨¡å¼ï¼‰

1. **æ”¶é›†è®ºæ–‡**ï¼šä»15ä¸ªä¸åŒé¢†åŸŸæ”¶é›†æŒ‡å®šå¹´ä»½çš„è®ºæ–‡ï¼ˆæ’é™¤æ–‡ç§‘å’Œæ•°å­¦ç±»ï¼‰
2. **è·å–ä¿¡æ¯**ï¼šè·å–è®ºæ–‡çš„arXiv IDã€PDFä¸‹è½½é“¾æ¥ç­‰
3. **å¹¶è¡Œå¤„ç†è®ºæ–‡**ï¼ˆ3ç¯‡åŒæ—¶è¿›è¡Œï¼‰ï¼š
   - **ä¸‹è½½PDF**ï¼šä¸‹è½½è®ºæ–‡PDF
   - **æå–æµç¨‹å›¾**ï¼šæœç´¢å…³é”®è¯ï¼ˆPipelineã€Workflowã€Flowchartç­‰ï¼‰ï¼Œæå–æœ€åˆé€‚çš„å›¾ç‰‡
   - **ç”ŸæˆPrompt**ï¼šä½¿ç”¨ `google/gemini-2.5-flash` åˆ†æå›¾ç‰‡ï¼Œç”Ÿæˆ5ä¸ªè¯¦ç»†Prompt
   - **å¹¶è¡Œç”Ÿæˆå›¾ç‰‡**ï¼ˆ3å¼ åŒæ—¶ï¼‰ï¼šä½¿ç”¨ `google/gemini-3-pro-image-preview` ç”Ÿæˆå›¾ç‰‡
   - **å¹¶è¡Œè¯„ä¼°ç›¸ä¼¼åº¦**ï¼ˆ5å¼ åŒæ—¶ï¼‰ï¼šä½¿ç”¨SSIMã€ç‰¹å¾åŒ¹é…ã€æ·±åº¦å­¦ä¹ ç®—æ³•è¯„ä¼°
   - **ä¿å­˜ç»“æœ**ï¼šæŒ‰ç›¸ä¼¼åº¦æ’åæ•´ç†è¾“å‡º
   - **è‡ªåŠ¨æ¸…ç†**ï¼šä¸ç¬¦åˆæ¡ä»¶çš„PDFç«‹å³åˆ é™¤ï¼ŒèŠ‚çœç©ºé—´

### è¾“å‡ºç»“æ„

```
data/prompt_test/
â”œâ”€â”€ results/                    # å®Œæ•´ç»“æœ
â”‚   â”œâ”€â”€ <arxiv_id_1>/
â”‚   â”‚   â”œâ”€â”€ original.png          # åŸå›¾
â”‚   â”‚   â”œâ”€â”€ generated_1.png      # æ’åç¬¬1çš„ç”Ÿæˆå›¾ï¼ˆæœ€ä½³ï¼‰
â”‚   â”‚   â”œâ”€â”€ generated_2.png      # æ’åç¬¬2çš„ç”Ÿæˆå›¾
â”‚   â”‚   â”œâ”€â”€ generated_3.png      # æ’åç¬¬3çš„ç”Ÿæˆå›¾
â”‚   â”‚   â”œâ”€â”€ generated_4.png      # æ’åç¬¬4çš„ç”Ÿæˆå›¾
â”‚   â”‚   â”œâ”€â”€ generated_5.png      # æ’åç¬¬5çš„ç”Ÿæˆå›¾
â”‚   â”‚   â””â”€â”€ prompts.txt          # æ‰€æœ‰promptåŠç›¸ä¼¼åº¦å¾—åˆ†
â”‚   â””â”€â”€ <arxiv_id_2>/
â”‚       â””â”€â”€ ...
â”œâ”€â”€ curated_results/            # ç²¾é€‰ç»“æœï¼ˆåªåŒ…å«æœ€ä½³ï¼‰
â”‚   â”œâ”€â”€ <arxiv_id_1>/
â”‚   â”‚   â”œâ”€â”€ original.png          # åŸå›¾
â”‚   â”‚   â”œâ”€â”€ generated_best.png   # æœ€ä½³ç”Ÿæˆå›¾
â”‚   â”‚   â””â”€â”€ best_prompt.txt      # æœ€ä½³prompt
â”‚   â””â”€â”€ ...
â””â”€â”€ summary.txt                 # æ€»ç»“æŠ¥å‘Š
```

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½

### å›¾ç‰‡æå–é€»è¾‘

ç¨‹åºä¼šæœç´¢ä»¥ä¸‹å…³é”®è¯æ¥å®šä½æµç¨‹å›¾/æ¼”ç¤ºå›¾ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰ï¼š

**é«˜ä¼˜å…ˆçº§**ï¼š
- `Pipeline` / `æµæ°´çº¿`

**å…¶ä»–å…³é”®è¯**ï¼š
- `Flowchart` / `æµç¨‹å›¾`
- `Architecture` / `æ¶æ„å›¾`
- `Workflow` / `å·¥ä½œæµç¨‹`
- `Technical Roadmap` / `æŠ€æœ¯è·¯çº¿`
- `Framework Diagram` / `æ¡†æ¶å›¾`
- `Experimental Design` / `å®éªŒè®¾è®¡`

ç¨‹åºä¼šå°è¯•æ‰€æœ‰åŒ¹é…çš„å…³é”®è¯å’Œé¡µé¢ï¼Œé€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„å›¾ç‰‡ã€‚å¦‚æœè®ºæ–‡ä¸­æ²¡æœ‰æ‰¾åˆ°è¿™äº›å…³é”®è¯ï¼Œç¨‹åºä¼šè‡ªåŠ¨è·³è¿‡è¯¥è®ºæ–‡ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ç¯‡ã€‚

### Promptç”Ÿæˆ

- **æ¨¡å‹**ï¼š`google/gemini-2.5-flash`
- **åŠŸèƒ½**ï¼šåˆ†æå›¾ç‰‡å¹¶ç”Ÿæˆè¯¦ç»†çš„ã€å¯ç”¨äºé‡æ–°ç”Ÿæˆç›¸ä¼¼å›¾ç‰‡çš„Prompt
- **æ•°é‡**ï¼šæ¯å¼ åŸå›¾ç”Ÿæˆ5ä¸ªä¸åŒçš„Prompt

### å›¾ç‰‡ç”Ÿæˆ

- **æ¨¡å‹**ï¼š`google/gemini-3-pro-image-preview`
- **å‰ç½®Prompt**ï¼šä½¿ç”¨ç§‘å­¦æ’å›¾ä¸“å®¶çš„é¢„è®¾Promptï¼Œç¡®ä¿ç”Ÿæˆé«˜è´¨é‡çš„å­¦æœ¯å¯è§†åŒ–å›¾ç‰‡
- **è¾“å‡º**ï¼šæ¯ä¸ªPromptç”Ÿæˆä¸€å¼ å›¾ç‰‡

## ğŸ“š å…¶ä»–åŠŸèƒ½

### æ‰¹é‡ä¸‹è½½è®ºæ–‡

é™¤äº†å›¾ç‰‡Promptæµ‹è¯•ï¼Œè¿™ä¸ªå·¥å…·è¿˜æ”¯æŒæ‰¹é‡ä¸‹è½½è®ºæ–‡ï¼š

```bash
# æ”¶é›†è®ºæ–‡æ ‡é¢˜
python scripts/collect_titles.py --source arxiv --year 2024 --arxiv-category cs.CV --max-results 1000

# è·å–è®ºæ–‡ä¿¡æ¯
python scripts/fetch_paper_info.py --limit 100

# ä¸‹è½½PDF
python scripts/process_pdfs.py --limit 50
```

### ç›‘æ§å’ŒçŠ¶æ€

```bash
# å®æ—¶ç›‘æ§ï¼ˆç²¾ç®€ç‰ˆï¼‰
bash å®æ—¶ç›‘æ§.sh

# å¿«é€ŸçŠ¶æ€æ£€æŸ¥
bash æŸ¥çœ‹è¿è¡ŒçŠ¶æ€.sh
```


## ğŸ“‹ é¡¹ç›®ç»“æ„

```
nona/
â”œâ”€â”€ collectors/          # è®ºæ–‡æ”¶é›†å™¨ï¼ˆarXivã€NeurIPSã€ICLRç­‰ï¼‰
â”œâ”€â”€ fetchers/           # è®ºæ–‡ä¿¡æ¯è·å–
â”œâ”€â”€ processors/         # PDFå¤„ç†å’Œå›¾ç‰‡æå–
â”œâ”€â”€ analyzers/          # AIåˆ†æï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ scripts/            # å‘½ä»¤è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ image_prompt_test.py  # å›¾ç‰‡Promptæµ‹è¯•ä¸»ç¨‹åº
â”‚   â”œâ”€â”€ collect_titles.py     # æ”¶é›†è®ºæ–‡æ ‡é¢˜
â”‚   â”œâ”€â”€ fetch_paper_info.py   # è·å–è®ºæ–‡ä¿¡æ¯
â”‚   â””â”€â”€ process_pdfs.py       # å¤„ç†PDF
â”œâ”€â”€ web/                # Webå¯è§†åŒ–ç•Œé¢
â”œâ”€â”€ config.py           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ database.py         # æ•°æ®åº“æ“ä½œ
â””â”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨
```

## âš™ï¸ é…ç½®è¯´æ˜

### OpenRouter APIé…ç½®

æ¨èä½¿ç”¨OpenRouterï¼Œæ”¯æŒå¤šä¸ªæ¨¡å‹ä¸”æ€§ä»·æ¯”é«˜ï¼š

1. è®¿é—® https://openrouter.ai/keys è·å–API Key
2. åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```bash
LLM_API_KEY=sk-or-v1-your-key-here
LLM_BASE_URL=https://openrouter.ai/api/v1
```

### æ”¯æŒçš„æ¨¡å‹

- **å›¾ç”Ÿæ–‡**ï¼š`google/gemini-2.5-flash`
- **æ–‡ç”Ÿå›¾**ï¼š`google/gemini-3-pro-image-preview`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **APIè´¹ç”¨**ï¼šå¤„ç†å¤§é‡å›¾ç‰‡éœ€è¦è°ƒç”¨å¤§é‡APIï¼Œæ³¨æ„æ§åˆ¶æˆæœ¬
2. **å¤„ç†æ—¶é—´**ï¼šå®Œæ•´æµç¨‹å¯èƒ½éœ€è¦æ•°å°æ—¶ï¼Œå»ºè®®å…ˆç”¨å°æ•°é‡æµ‹è¯•
3. **å­˜å‚¨ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼ˆæ¯å¼ å›¾ç‰‡çº¦å‡ MBï¼‰
4. **ç½‘ç»œè¿æ¥**ï¼šéœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥ä¸‹è½½è®ºæ–‡å’Œè°ƒç”¨API

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜1: æ‰¾ä¸åˆ°è¶³å¤Ÿçš„æµç¨‹å›¾

**è§£å†³**ï¼šå¢åŠ  `--max-papers` å‚æ•°ï¼Œå¤„ç†æ›´å¤šè®ºæ–‡

### é—®é¢˜2: APIè°ƒç”¨å¤±è´¥

**è§£å†³**ï¼š
- æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æ—¥å¿—äº†è§£å…·ä½“é”™è¯¯

### é—®é¢˜3: Promptè§£æé”™è¯¯

**è§£å†³**ï¼šç¨‹åºå·²è‡ªåŠ¨è¿‡æ»¤æ€»æŒ‡ä»¤æ–‡æœ¬ï¼Œå¦‚æœä»æœ‰é—®é¢˜ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueã€‚

---

**å¼€å§‹æµ‹è¯•ä½ çš„Promptå§ï¼** ğŸš€
